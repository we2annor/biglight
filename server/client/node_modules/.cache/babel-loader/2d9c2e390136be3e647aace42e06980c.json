{"ast":null,"code":"export const lazyLoad = () => {\n  const images = document.querySelectorAll(\"img.lazy\");\n  let throttleTimeout = \"\";\n\n  const lazyLoad = () => {\n    if (throttleTimeout) {\n      clearTimeout(throttleTimeout);\n    }\n  };\n\n  const onDOMContentLoaded = () => {\n    throttleTimeout = setTimeout(() => {\n      let scrollTop = window.pageYOffset;\n      images.forEach(image => {\n        if (image.offsetTop < window.innerHeight + scrollTop) {\n          image.src = image.dataset.src;\n          image.classList.remove(\"lazy\");\n        }\n      });\n\n      if (images.length === 0) {\n        document.removeEventListener(\"scroll\", lazyLoad);\n        window.removeEventListener(\"resize\", lazyLoad);\n        window.removeEventListener(\"orientationchange\", lazyLoad);\n      }\n    }, 20);\n    document.addEventListener(\"scroll\", lazyLoad);\n    window.addEventListener(\"resize\", lazyLoad);\n    window.addEventListener(\"orientationchange\", lazyLoad);\n  };\n\n  document.addEventListener(\"DOMContentLoaded\", onDOMContentLoaded);\n  console.log(\"images bottom\", images.length);\n};","map":{"version":3,"sources":["/Users/ernest/Desktop/biglight/server/client/src/util/lazy.js"],"names":["lazyLoad","images","document","querySelectorAll","throttleTimeout","clearTimeout","onDOMContentLoaded","setTimeout","scrollTop","window","pageYOffset","forEach","image","offsetTop","innerHeight","src","dataset","classList","remove","length","removeEventListener","addEventListener","console","log"],"mappings":"AAAA,OAAO,MAAMA,QAAQ,GAAG,MAAM;AAC5B,QAAMC,MAAM,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,CAAf;AACA,MAAIC,eAAe,GAAG,EAAtB;;AAEA,QAAMJ,QAAQ,GAAG,MAAM;AACrB,QAAII,eAAJ,EAAqB;AACnBC,MAAAA,YAAY,CAACD,eAAD,CAAZ;AACD;AACF,GAJD;;AAMA,QAAME,kBAAkB,GAAG,MAAM;AAC/BF,IAAAA,eAAe,GAAGG,UAAU,CAAC,MAAM;AACjC,UAAIC,SAAS,GAAGC,MAAM,CAACC,WAAvB;AACAT,MAAAA,MAAM,CAACU,OAAP,CAAgBC,KAAD,IAAW;AACxB,YAAIA,KAAK,CAACC,SAAN,GAAkBJ,MAAM,CAACK,WAAP,GAAqBN,SAA3C,EAAsD;AACpDI,UAAAA,KAAK,CAACG,GAAN,GAAYH,KAAK,CAACI,OAAN,CAAcD,GAA1B;AACAH,UAAAA,KAAK,CAACK,SAAN,CAAgBC,MAAhB,CAAuB,MAAvB;AACD;AACF,OALD;;AAOA,UAAIjB,MAAM,CAACkB,MAAP,KAAkB,CAAtB,EAAyB;AACvBjB,QAAAA,QAAQ,CAACkB,mBAAT,CAA6B,QAA7B,EAAuCpB,QAAvC;AACAS,QAAAA,MAAM,CAACW,mBAAP,CAA2B,QAA3B,EAAqCpB,QAArC;AACAS,QAAAA,MAAM,CAACW,mBAAP,CAA2B,mBAA3B,EAAgDpB,QAAhD;AACD;AACF,KAd2B,EAczB,EAdyB,CAA5B;AAgBAE,IAAAA,QAAQ,CAACmB,gBAAT,CAA0B,QAA1B,EAAoCrB,QAApC;AACAS,IAAAA,MAAM,CAACY,gBAAP,CAAwB,QAAxB,EAAkCrB,QAAlC;AACAS,IAAAA,MAAM,CAACY,gBAAP,CAAwB,mBAAxB,EAA6CrB,QAA7C;AACD,GApBD;;AAsBAE,EAAAA,QAAQ,CAACmB,gBAAT,CAA0B,kBAA1B,EAA8Cf,kBAA9C;AACAgB,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BtB,MAAM,CAACkB,MAApC;AACD,CAlCM","sourcesContent":["export const lazyLoad = () => {\n  const images = document.querySelectorAll(\"img.lazy\");\n  let throttleTimeout = \"\";\n\n  const lazyLoad = () => {\n    if (throttleTimeout) {\n      clearTimeout(throttleTimeout);\n    }\n  };\n\n  const onDOMContentLoaded = () => {\n    throttleTimeout = setTimeout(() => {\n      let scrollTop = window.pageYOffset;\n      images.forEach((image) => {\n        if (image.offsetTop < window.innerHeight + scrollTop) {\n          image.src = image.dataset.src;\n          image.classList.remove(\"lazy\");\n        }\n      });\n\n      if (images.length === 0) {\n        document.removeEventListener(\"scroll\", lazyLoad);\n        window.removeEventListener(\"resize\", lazyLoad);\n        window.removeEventListener(\"orientationchange\", lazyLoad);\n      }\n    }, 20);\n\n    document.addEventListener(\"scroll\", lazyLoad);\n    window.addEventListener(\"resize\", lazyLoad);\n    window.addEventListener(\"orientationchange\", lazyLoad);\n  };\n\n  document.addEventListener(\"DOMContentLoaded\", onDOMContentLoaded);\n  console.log(\"images bottom\", images.length);\n};\n"]},"metadata":{},"sourceType":"module"}