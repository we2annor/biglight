{"ast":null,"code":"var _jsxFileName = \"/Users/ernest/Desktop/biglight/server/client/src/util/lazyLoad/LazyLoad.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nconst placeholder = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=\";\nconst Image = styled.img`\n  display: block;\n\n  @keyframes loaded {\n    0% {\n      opacity: 0.1;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n  &.loaded:not(.has-error) {\n    animation: loaded 300ms ease-in-out;\n  }\n  &.has-error {\n    content: url(${placeholder});\n  }\n`;\nexport const LazyLoad = ({\n  src,\n  alt,\n  //data,\n  //srcSet,\n  //sizes,\n  classname\n}) => {\n  const [imageSrc, setImageSrc] = useState(placeholder);\n  const [imageRef, setImageRef] = useState();\n\n  const onLoad = event => {\n    event.target.classList.add(\"loaded\");\n  };\n\n  const onError = event => {\n    event.target.classList.add(\"has-error\");\n  };\n\n  useEffect(() => {\n    let observer;\n    let didCancel = false;\n\n    if (imageRef && imageSrc !== src) {\n      if (IntersectionObserver) {\n        observer = new IntersectionObserver(entries => {\n          entries.forEach(entry => {\n            if (!didCancel && (entry.intersectionRatio > 0 || entry.isIntersecting)) {\n              setImageSrc(src);\n              observer.unobserve(imageRef);\n            }\n          });\n        }, {\n          threshold: 0.03,\n          rootMargin: \"-10%\"\n        });\n        observer.observe(imageRef);\n      } else {\n        setImageSrc(src);\n      }\n    }\n\n    return () => {\n      didCancel = true;\n\n      if (observer && observer.unobserve) {\n        observer.unobserve(imageRef);\n        console.log(\"image Ref\", imageRef);\n      }\n    };\n  }, [src, imageSrc, imageRef]);\n  console.log(\"test\");\n  return /*#__PURE__*/React.createElement(Image, {\n    ref: setImageRef,\n    src: imageSrc,\n    alt: alt,\n    onLoad: onLoad,\n    onError: onError,\n    loading: \"lazy\",\n    className: classname,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  });\n};","map":{"version":3,"sources":["/Users/ernest/Desktop/biglight/server/client/src/util/lazyLoad/LazyLoad.jsx"],"names":["React","useState","useEffect","styled","placeholder","Image","img","LazyLoad","src","alt","classname","imageSrc","setImageSrc","imageRef","setImageRef","onLoad","event","target","classList","add","onError","observer","didCancel","IntersectionObserver","entries","forEach","entry","intersectionRatio","isIntersecting","unobserve","threshold","rootMargin","observe","console","log"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,MAAMC,WAAW,GACf,oHADF;AAGA,MAAMC,KAAK,GAAGF,MAAM,CAACG,GAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmBF,WAAY;AAC/B;AACA,CAjBA;AAmBA,OAAO,MAAMG,QAAQ,GAAG,CAAC;AACvBC,EAAAA,GADuB;AAEvBC,EAAAA,GAFuB;AAGvB;AACA;AACA;AACAC,EAAAA;AANuB,CAAD,KAOlB;AACJ,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAACG,WAAD,CAAxC;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,EAAxC;;AAEA,QAAMc,MAAM,GAAIC,KAAD,IAAW;AACxBA,IAAAA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,GAAvB,CAA2B,QAA3B;AACD,GAFD;;AAIA,QAAMC,OAAO,GAAIJ,KAAD,IAAW;AACzBA,IAAAA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,GAAvB,CAA2B,WAA3B;AACD,GAFD;;AAIAjB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAImB,QAAJ;AACA,QAAIC,SAAS,GAAG,KAAhB;;AAEA,QAAIT,QAAQ,IAAIF,QAAQ,KAAKH,GAA7B,EAAkC;AAChC,UAAIe,oBAAJ,EAA0B;AACxBF,QAAAA,QAAQ,GAAG,IAAIE,oBAAJ,CACRC,OAAD,IAAa;AACXA,UAAAA,OAAO,CAACC,OAAR,CAAiBC,KAAD,IAAW;AACzB,gBACE,CAACJ,SAAD,KACCI,KAAK,CAACC,iBAAN,GAA0B,CAA1B,IAA+BD,KAAK,CAACE,cADtC,CADF,EAGE;AACAhB,cAAAA,WAAW,CAACJ,GAAD,CAAX;AACAa,cAAAA,QAAQ,CAACQ,SAAT,CAAmBhB,QAAnB;AACD;AACF,WARD;AASD,SAXQ,EAYT;AACEiB,UAAAA,SAAS,EAAE,IADb;AAEEC,UAAAA,UAAU,EAAE;AAFd,SAZS,CAAX;AAiBAV,QAAAA,QAAQ,CAACW,OAAT,CAAiBnB,QAAjB;AACD,OAnBD,MAmBO;AACLD,QAAAA,WAAW,CAACJ,GAAD,CAAX;AACD;AACF;;AAED,WAAO,MAAM;AACXc,MAAAA,SAAS,GAAG,IAAZ;;AACA,UAAID,QAAQ,IAAIA,QAAQ,CAACQ,SAAzB,EAAoC;AAClCR,QAAAA,QAAQ,CAACQ,SAAT,CAAmBhB,QAAnB;AACAoB,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBrB,QAAzB;AACD;AACF,KAND;AAOD,GApCQ,EAoCN,CAACL,GAAD,EAAMG,QAAN,EAAgBE,QAAhB,CApCM,CAAT;AAsCAoB,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,sBACE,oBAAC,KAAD;AACE,IAAA,GAAG,EAAEpB,WADP;AAEE,IAAA,GAAG,EAAEH,QAFP;AAGE,IAAA,GAAG,EAAEF,GAHP;AAIE,IAAA,MAAM,EAAEM,MAJV;AAKE,IAAA,OAAO,EAAEK,OALX;AAME,IAAA,OAAO,EAAC,MANV;AAOE,IAAA,SAAS,EAAEV,SAPb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAWD,CArEM","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\n\nconst placeholder =\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=\";\n\nconst Image = styled.img`\n  display: block;\n\n  @keyframes loaded {\n    0% {\n      opacity: 0.1;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n  &.loaded:not(.has-error) {\n    animation: loaded 300ms ease-in-out;\n  }\n  &.has-error {\n    content: url(${placeholder});\n  }\n`;\n\nexport const LazyLoad = ({\n  src,\n  alt,\n  //data,\n  //srcSet,\n  //sizes,\n  classname,\n}) => {\n  const [imageSrc, setImageSrc] = useState(placeholder);\n  const [imageRef, setImageRef] = useState();\n\n  const onLoad = (event) => {\n    event.target.classList.add(\"loaded\");\n  };\n\n  const onError = (event) => {\n    event.target.classList.add(\"has-error\");\n  };\n\n  useEffect(() => {\n    let observer;\n    let didCancel = false;\n\n    if (imageRef && imageSrc !== src) {\n      if (IntersectionObserver) {\n        observer = new IntersectionObserver(\n          (entries) => {\n            entries.forEach((entry) => {\n              if (\n                !didCancel &&\n                (entry.intersectionRatio > 0 || entry.isIntersecting)\n              ) {\n                setImageSrc(src);\n                observer.unobserve(imageRef);\n              }\n            });\n          },\n          {\n            threshold: 0.03,\n            rootMargin: \"-10%\",\n          }\n        );\n        observer.observe(imageRef);\n      } else {\n        setImageSrc(src);\n      }\n    }\n\n    return () => {\n      didCancel = true;\n      if (observer && observer.unobserve) {\n        observer.unobserve(imageRef);\n        console.log(\"image Ref\", imageRef);\n      }\n    };\n  }, [src, imageSrc, imageRef]);\n\n  console.log(\"test\");\n  return (\n    <Image\n      ref={setImageRef}\n      src={imageSrc}\n      alt={alt}\n      onLoad={onLoad}\n      onError={onError}\n      loading='lazy'\n      className={classname}\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}