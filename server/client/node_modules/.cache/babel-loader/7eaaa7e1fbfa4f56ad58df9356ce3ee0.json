{"ast":null,"code":"var _jsxFileName = \"/Users/ernest/Desktop/biglight/server/client/src/util/lazyLoad/LazyLoad.jsx\";\nimport React, { useState, useEffect } from \"react\"; //import styled from \"styled-components\";\n// const Image = styled.img`\n//   display: block;\n//   height: 100px;\n//   width: auto;\n//   @keyframes loaded {\n//     0% {\n//       opacity: 0.1;\n//     }\n//     100% {\n//       opacity: 1;\n//     }\n//   }\n//   &.loaded:not(.has-error) {\n//     animation: loaded 300ms ease-in-out;\n//   }\n//   &.has-error {\n//     content: url(${placeHolder});\n//   }\n// `;\n\nexport const LazyLoad = ({\n  src,\n  alt,\n  placeholder,\n  data,\n  srcSet,\n  size\n}) => {\n  const [imageSrc, setImageSrc] = useState(placeholder);\n  const [imageRef, setImageRef] = useState();\n\n  const onLoad = event => {\n    event.target.classList.add(\"loaded\");\n  };\n\n  const onError = event => {\n    event.target.classList.add(\"has-error\");\n  };\n\n  useEffect(() => {\n    let observer;\n    let didCancel = false;\n\n    if (imageRef && imageSrc !== src) {\n      if (IntersectionObserver) {\n        observer = new IntersectionObserver(entries => {\n          entries.forEach(entry => {\n            if (!didCancel && (entry.intersectionRatio > 0 || entry.isIntersecting)) {\n              setImageSrc(src);\n              observer.unobserve(imageRef);\n            }\n          });\n        }, {\n          threshold: 0.01,\n          rootMargin: \"75%\"\n        });\n        observer.observe(imageRef);\n      } else {\n        // Old browsers fallback\n        setImageSrc(src);\n      }\n    }\n\n    return () => {\n      didCancel = true; // on component cleanup, we remove the listner\n\n      if (observer && observer.unobserve) {\n        observer.unobserve(imageRef);\n      }\n    };\n  }, [src, imageSrc, imageRef]);\n  return /*#__PURE__*/React.createElement(\"img\", {\n    ref: setImageRef,\n    src: imageSrc,\n    alt: alt,\n    onLoad: onLoad,\n    onError: onError,\n    \"data-src\": data,\n    srcSet: srcSet,\n    size: size,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  });\n};","map":{"version":3,"sources":["/Users/ernest/Desktop/biglight/server/client/src/util/lazyLoad/LazyLoad.jsx"],"names":["React","useState","useEffect","LazyLoad","src","alt","placeholder","data","srcSet","size","imageSrc","setImageSrc","imageRef","setImageRef","onLoad","event","target","classList","add","onError","observer","didCancel","IntersectionObserver","entries","forEach","entry","intersectionRatio","isIntersecting","unobserve","threshold","rootMargin","observe"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C,C,CACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA,GAAF;AAAOC,EAAAA,GAAP;AAAYC,EAAAA,WAAZ;AAAyBC,EAAAA,IAAzB;AAA+BC,EAAAA,MAA/B;AAAuCC,EAAAA;AAAvC,CAAD,KAAmD;AACzE,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAACK,WAAD,CAAxC;AACA,QAAM,CAACM,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,EAAxC;;AAEA,QAAMa,MAAM,GAAIC,KAAD,IAAW;AACxBA,IAAAA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,GAAvB,CAA2B,QAA3B;AACD,GAFD;;AAIA,QAAMC,OAAO,GAAIJ,KAAD,IAAW;AACzBA,IAAAA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,GAAvB,CAA2B,WAA3B;AACD,GAFD;;AAIAhB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIkB,QAAJ;AACA,QAAIC,SAAS,GAAG,KAAhB;;AAEA,QAAIT,QAAQ,IAAIF,QAAQ,KAAKN,GAA7B,EAAkC;AAChC,UAAIkB,oBAAJ,EAA0B;AACxBF,QAAAA,QAAQ,GAAG,IAAIE,oBAAJ,CACRC,OAAD,IAAa;AACXA,UAAAA,OAAO,CAACC,OAAR,CAAiBC,KAAD,IAAW;AACzB,gBACE,CAACJ,SAAD,KACCI,KAAK,CAACC,iBAAN,GAA0B,CAA1B,IAA+BD,KAAK,CAACE,cADtC,CADF,EAGE;AACAhB,cAAAA,WAAW,CAACP,GAAD,CAAX;AACAgB,cAAAA,QAAQ,CAACQ,SAAT,CAAmBhB,QAAnB;AACD;AACF,WARD;AASD,SAXQ,EAYT;AACEiB,UAAAA,SAAS,EAAE,IADb;AAEEC,UAAAA,UAAU,EAAE;AAFd,SAZS,CAAX;AAiBAV,QAAAA,QAAQ,CAACW,OAAT,CAAiBnB,QAAjB;AACD,OAnBD,MAmBO;AACL;AACAD,QAAAA,WAAW,CAACP,GAAD,CAAX;AACD;AACF;;AACD,WAAO,MAAM;AACXiB,MAAAA,SAAS,GAAG,IAAZ,CADW,CAEX;;AACA,UAAID,QAAQ,IAAIA,QAAQ,CAACQ,SAAzB,EAAoC;AAClCR,QAAAA,QAAQ,CAACQ,SAAT,CAAmBhB,QAAnB;AACD;AACF,KAND;AAOD,GApCQ,EAoCN,CAACR,GAAD,EAAMM,QAAN,EAAgBE,QAAhB,CApCM,CAAT;AAqCA,sBACE;AACE,IAAA,GAAG,EAAEC,WADP;AAEE,IAAA,GAAG,EAAEH,QAFP;AAGE,IAAA,GAAG,EAAEL,GAHP;AAIE,IAAA,MAAM,EAAES,MAJV;AAKE,IAAA,OAAO,EAAEK,OALX;AAME,gBAAUZ,IANZ;AAOE,IAAA,MAAM,EAAEC,MAPV;AAQE,IAAA,IAAI,EAAEC,IARR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAYD,CA7DM","sourcesContent":["import React, { useState, useEffect } from \"react\";\n//import styled from \"styled-components\";\n\n// const Image = styled.img`\n//   display: block;\n//   height: 100px;\n//   width: auto;\n\n//   @keyframes loaded {\n//     0% {\n//       opacity: 0.1;\n//     }\n//     100% {\n//       opacity: 1;\n//     }\n//   }\n\n//   &.loaded:not(.has-error) {\n//     animation: loaded 300ms ease-in-out;\n//   }\n//   &.has-error {\n//     content: url(${placeHolder});\n//   }\n// `;\n\nexport const LazyLoad = ({ src, alt, placeholder, data, srcSet, size }) => {\n  const [imageSrc, setImageSrc] = useState(placeholder);\n  const [imageRef, setImageRef] = useState();\n\n  const onLoad = (event) => {\n    event.target.classList.add(\"loaded\");\n  };\n\n  const onError = (event) => {\n    event.target.classList.add(\"has-error\");\n  };\n\n  useEffect(() => {\n    let observer;\n    let didCancel = false;\n\n    if (imageRef && imageSrc !== src) {\n      if (IntersectionObserver) {\n        observer = new IntersectionObserver(\n          (entries) => {\n            entries.forEach((entry) => {\n              if (\n                !didCancel &&\n                (entry.intersectionRatio > 0 || entry.isIntersecting)\n              ) {\n                setImageSrc(src);\n                observer.unobserve(imageRef);\n              }\n            });\n          },\n          {\n            threshold: 0.01,\n            rootMargin: \"75%\",\n          }\n        );\n        observer.observe(imageRef);\n      } else {\n        // Old browsers fallback\n        setImageSrc(src);\n      }\n    }\n    return () => {\n      didCancel = true;\n      // on component cleanup, we remove the listner\n      if (observer && observer.unobserve) {\n        observer.unobserve(imageRef);\n      }\n    };\n  }, [src, imageSrc, imageRef]);\n  return (\n    <img\n      ref={setImageRef}\n      src={imageSrc}\n      alt={alt}\n      onLoad={onLoad}\n      onError={onError}\n      data-src={data}\n      srcSet={srcSet}\n      size={size}\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}