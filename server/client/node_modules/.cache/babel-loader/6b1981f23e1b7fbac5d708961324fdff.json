{"ast":null,"code":"const onDomLoaded = () => {\n  const images = document.querySelectorAll(\".lazy\");\n\n  const lazyLoad = () => {\n    if (throttleTimeout) {\n      clearTimeout(throttleTimeout);\n    }\n\n    const timeOut = () => {\n      var scrollTop = window.pageYOffset;\n      images.forEach(function (img) {\n        if (img.offsetTop < window.innerHeight + scrollTop) {\n          img.src = img.dataset.src;\n          img.classList.remove(\"lazy\");\n        }\n      });\n\n      if (images.length === 0) {\n        document.removeEventListener(\"scroll\", lazyLoad);\n        window.removeEventListener(\"resize\", lazyLoad);\n        window.removeEventListener(\"orientationChange\", lazyLoad);\n      }\n    };\n\n    if (\"IntersectionObserver\" in window) {\n      const imageObserver = new IntersectionObserver(function (entries, observer) {\n        entries.forEach(function (entry) {\n          if (entry.isIntersecting) {\n            var image = entry.target;\n            image.src = image.dataset.src;\n            image.classList.remove(\"lazy\");\n            imageObserver.unobserve(image);\n          }\n        });\n      });\n      images.forEach(function (image) {\n        imageObserver.observe(image);\n      });\n    } else {\n      let throttleTimeout = setTimeout(timeOut(), 20);\n    }\n\n    document.addEventListener(\"scroll\", lazyLoad);\n    window.addEventListener(\"resize\", lazyLoad);\n    window.addEventListener(\"orientationChange\", lazyLoad);\n  };\n};\n\nexport const lazyLoad = () => {\n  document.addEventListener(\"DOMContentLoaded\", onDomLoaded());\n};","map":{"version":3,"sources":["/Users/ernest/Desktop/biglight/server/client/src/util/lazy.js"],"names":["onDomLoaded","images","document","querySelectorAll","lazyLoad","throttleTimeout","clearTimeout","timeOut","scrollTop","window","pageYOffset","forEach","img","offsetTop","innerHeight","src","dataset","classList","remove","length","removeEventListener","imageObserver","IntersectionObserver","entries","observer","entry","isIntersecting","image","target","unobserve","observe","setTimeout","addEventListener"],"mappings":"AAAA,MAAMA,WAAW,GAAG,MAAM;AACxB,QAAMC,MAAM,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAAf;;AAEA,QAAMC,QAAQ,GAAG,MAAM;AACrB,QAAIC,eAAJ,EAAqB;AACnBC,MAAAA,YAAY,CAACD,eAAD,CAAZ;AACD;;AAED,UAAME,OAAO,GAAG,MAAM;AACpB,UAAIC,SAAS,GAAGC,MAAM,CAACC,WAAvB;AACAT,MAAAA,MAAM,CAACU,OAAP,CAAe,UAAUC,GAAV,EAAe;AAC5B,YAAIA,GAAG,CAACC,SAAJ,GAAgBJ,MAAM,CAACK,WAAP,GAAqBN,SAAzC,EAAoD;AAClDI,UAAAA,GAAG,CAACG,GAAJ,GAAUH,GAAG,CAACI,OAAJ,CAAYD,GAAtB;AACAH,UAAAA,GAAG,CAACK,SAAJ,CAAcC,MAAd,CAAqB,MAArB;AACD;AACF,OALD;;AAMA,UAAIjB,MAAM,CAACkB,MAAP,KAAkB,CAAtB,EAAyB;AACvBjB,QAAAA,QAAQ,CAACkB,mBAAT,CAA6B,QAA7B,EAAuChB,QAAvC;AACAK,QAAAA,MAAM,CAACW,mBAAP,CAA2B,QAA3B,EAAqChB,QAArC;AACAK,QAAAA,MAAM,CAACW,mBAAP,CAA2B,mBAA3B,EAAgDhB,QAAhD;AACD;AACF,KAbD;;AAeA,QAAI,0BAA0BK,MAA9B,EAAsC;AACpC,YAAMY,aAAa,GAAG,IAAIC,oBAAJ,CAAyB,UAC7CC,OAD6C,EAE7CC,QAF6C,EAG7C;AACAD,QAAAA,OAAO,CAACZ,OAAR,CAAgB,UAAUc,KAAV,EAAiB;AAC/B,cAAIA,KAAK,CAACC,cAAV,EAA0B;AACxB,gBAAIC,KAAK,GAAGF,KAAK,CAACG,MAAlB;AACAD,YAAAA,KAAK,CAACZ,GAAN,GAAYY,KAAK,CAACX,OAAN,CAAcD,GAA1B;AACAY,YAAAA,KAAK,CAACV,SAAN,CAAgBC,MAAhB,CAAuB,MAAvB;AACAG,YAAAA,aAAa,CAACQ,SAAd,CAAwBF,KAAxB;AACD;AACF,SAPD;AAQD,OAZqB,CAAtB;AAcA1B,MAAAA,MAAM,CAACU,OAAP,CAAe,UAAUgB,KAAV,EAAiB;AAC9BN,QAAAA,aAAa,CAACS,OAAd,CAAsBH,KAAtB;AACD,OAFD;AAGD,KAlBD,MAkBO;AACL,UAAItB,eAAe,GAAG0B,UAAU,CAACxB,OAAO,EAAR,EAAY,EAAZ,CAAhC;AACD;;AAEDL,IAAAA,QAAQ,CAAC8B,gBAAT,CAA0B,QAA1B,EAAoC5B,QAApC;AACAK,IAAAA,MAAM,CAACuB,gBAAP,CAAwB,QAAxB,EAAkC5B,QAAlC;AACAK,IAAAA,MAAM,CAACuB,gBAAP,CAAwB,mBAAxB,EAA6C5B,QAA7C;AACD,GA7CD;AA8CD,CAjDD;;AAmDA,OAAO,MAAMA,QAAQ,GAAG,MAAM;AAC5BF,EAAAA,QAAQ,CAAC8B,gBAAT,CAA0B,kBAA1B,EAA8ChC,WAAW,EAAzD;AACD,CAFM","sourcesContent":["const onDomLoaded = () => {\n  const images = document.querySelectorAll(\".lazy\");\n\n  const lazyLoad = () => {\n    if (throttleTimeout) {\n      clearTimeout(throttleTimeout);\n    }\n\n    const timeOut = () => {\n      var scrollTop = window.pageYOffset;\n      images.forEach(function (img) {\n        if (img.offsetTop < window.innerHeight + scrollTop) {\n          img.src = img.dataset.src;\n          img.classList.remove(\"lazy\");\n        }\n      });\n      if (images.length === 0) {\n        document.removeEventListener(\"scroll\", lazyLoad);\n        window.removeEventListener(\"resize\", lazyLoad);\n        window.removeEventListener(\"orientationChange\", lazyLoad);\n      }\n    };\n\n    if (\"IntersectionObserver\" in window) {\n      const imageObserver = new IntersectionObserver(function (\n        entries,\n        observer\n      ) {\n        entries.forEach(function (entry) {\n          if (entry.isIntersecting) {\n            var image = entry.target;\n            image.src = image.dataset.src;\n            image.classList.remove(\"lazy\");\n            imageObserver.unobserve(image);\n          }\n        });\n      });\n\n      images.forEach(function (image) {\n        imageObserver.observe(image);\n      });\n    } else {\n      let throttleTimeout = setTimeout(timeOut(), 20);\n    }\n\n    document.addEventListener(\"scroll\", lazyLoad);\n    window.addEventListener(\"resize\", lazyLoad);\n    window.addEventListener(\"orientationChange\", lazyLoad);\n  };\n};\n\nexport const lazyLoad = () => {\n  document.addEventListener(\"DOMContentLoaded\", onDomLoaded());\n};\n"]},"metadata":{},"sourceType":"module"}